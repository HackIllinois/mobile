<manifest xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- REQUIRED: Discovery on older Android versions (and some Android 12+ devices) -->
    <!-- The "maxSdkVersion" is optional; keeping it ensures broad compatibility. -->
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />

    <!-- REQUIRED: Android 12+ (API 31+) Bluetooth Permissions -->
    <!-- 'neverForLocation' is NOT used here because Nearby Connections often uses BLE for legacy discovery -->
    <uses-permission android:name="android.permission.BLUETOOTH_SCAN" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADVERTISE" />
    <uses-permission android:name="android.permission.BLUETOOTH_CONNECT" />

    <!-- REQUIRED: Android 13+ (API 33+) Wi-Fi Direct Discovery -->
    <uses-permission android:name="android.permission.NEARBY_WIFI_DEVICES" />

    <!-- REQUIRED: To upgrade bandwidth from Bluetooth to Wi-Fi Direct -->
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />

    <!-- Hardware Features -->
    <uses-feature android:name="android.hardware.bluetooth" android:required="true" />
    <uses-feature android:name="android.hardware.wifi" android:required="true" />

</manifest>